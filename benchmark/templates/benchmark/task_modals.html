{% load static %}
{% load add_attr %}
{# details of the modal when clicking the rank #}
<div class="modal fade" id="evaluationmodal" tabindex="-1" role="dialog" aria-labelledby="evaluationmodallabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="evaluationmodallabel">Evaluation Measures</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				{% lorem 1 p %}
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>


<div class="modal fade" id="submissionformatmodal" tabindex="-1" role="dialog" aria-labelledby="submissionformatmodallabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="submissionformatmodallabel">Submission Format</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				{{ task.submission_format|linebreaks }}
				<p>For more details regarding the online submissions, please refer to the main task page.</p>
			</div>
			<div class="modal-footer">
				<a href="{{ task.sample_submission.url }}" class="btn btn-primary">Download Sample submission</a>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>


<div class="modal fade" id="onlinesubmissionmodal" tabindex="-1" role="dialog" aria-labelledby="onlinesubmissionmodallabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="onlinesubmissionmodallabel">Online Submission Format</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<p><b>Online Submission</b> is a feature introduced by the Indian language benchmark system for aiding in reducing the over-fitting of a particular submission to a specific dataset. This feat is accomplished by requesting the author for producing the result of the method individually, i.e. instead of uploading all the results from a test dataset in task user is asked to run a script that downloads an individual test image from dataset, calculates the result for that image according the logic provided by the user and then uploads the result to the benchmark evaluation system.</p>
				<p>This process can be easily accomplished using GET/POST requests framework built in the system.<br>
				Below is provided a sample (python) code that uses this online framework to upload one online submission.</p>
				<p>For each registered user, there is a unique api_key generated by the system that the user has to use in the url of GET/POST requests</p>
				{% if user.is_authenticated %}
				<p>api_key for user {{ user.username }}:<br>
				<span class="userapikey mark">{{ user.api_key.key }}</span></p>
				{% else %}
				<p>Please <a href="{% url 'benchmark:login' %}?next={{ request.path_info }}">Login</a>/<a href="{% url 'benchmark:register' %}?next={{ request.path_info }}">Register</a> to get the api_key nessacary for online submissions</p>
				{% endif %}
			</div>
			<div class="modal-footer">
				<a href="{{ task.sample_online_submission.url }}" class="btn btn-primary {% if not user.is_authenticated %}disabled{% endif %}" target="_blank">View Sample Code</a>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>


{% for d in task.datasets.all %}
<div class="modal fade" id="dataset{{ d.id }}modal" tabindex="-1" role="dialog" aria-labelledby="dataset{{ d.id }}modallabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="dataset{{ d.id }}modallabel">Dataset Description for version {{ d.version }}</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				{{ d.description|linebreaks }}
				<img src="{% static 'benchmark/images/printed_task_figure_2.png' %}" class="figure-img img-fluid rounded w-50">
			</div>
			<div class="modal-footer">
				<a href="{{ d.get_download_link }}" class="btn btn-primary">Download</a>
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
{% endfor %}


<div class="modal fade" id="uploadsubmissionmodal" tabindex="-1" role="dialog" aria-labelledby="uploadsubmissionmodallabel" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="uploadsubmissionmodallabel">Upload New Submission (offline)</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<form method="post" enctype="multipart/form-data">
				<div class="modal-body">
					{% csrf_token %}
					{% for field in form %}
					{% if field.id_for_label == "id_public" %}
					<div class="form-check row ml-1">
						{{ field|add_attr:"form-check-input" }}
						<label for="{{ field.id_for_label }}" class="form-check-label">
							{{ field.label }}
							{% if field.help_text %}
							<span class="fa fa-info-circle" title="{{ field.help_text }}" data-toggle="tooltip"></span>
							{% endif %}
						</label>
					</div>
					{% else %}
					<div class="form-group row">
						{{ field.errors }}
						<label for="{{ field.id_for_label }}" class="col-2 col-form-label">
							{{ field.label }}
							{% if field.help_text %}
							<span class="fa fa-info-circle" title="{{ field.help_text }}" data-toggle="tooltip"></span>
							{% endif %}
						</label>
						<div class="col-8">
							{{ field|add_attr:"form-control" }}
						</div>
					</div>
					{% endif %}
					{% endfor %}


					<!--<div class="form-group row">-->
						<!--<label for="id_title" class="col-3 col-form-label col-form-label-sm">Title *</label>-->
						<!--<div class="col-7">-->
							<!--<input type="text" class="form-control form-control-sm" id="id_title" placeholder="Enter Submission Title" required>-->
						<!--</div>-->
					<!--</div>-->
					<!--<div class="form-group row">-->
						<!--<label for="id_description" class="col-3 col-form-label col-form-label-sm">Description *</label>-->
						<!--<div class="col-7">-->
							<!--<textarea cols="10" rows="4" type="text" class="form-control form-control-sm" id="id_description" placeholder="Enter the brief description of the Submission" required></textarea>-->
						<!--</div>-->
					<!--</div>-->
					<!--<div class="row">-->
						<!--<div class="form-group col-5">-->
							<!--<label for="id_code_link" class="col-form-label col-form-label-sm">Code Link</label>-->
							<!--<input type="url" class="form-control form-control-sm" id="id_code_link" placeholder="Enter link to code">-->
						<!--</div>-->
						<!--<div class="form-group col-5">-->
							<!--<label for="id_paper_link" class="col-form-label col-form-label-sm">Paper Link</label>-->
							<!--<input type="url" class="form-control form-control-sm" id="id_paper_link" placeholder="Enter link to paper">-->
						<!--</div>-->
					<!--</div>-->
					<!--<div class="form-group row">-->
						<!--<div class="col-10 custom-file">-->
							<!--<label for="customFile" class="col-form-label custom-file-label col-form-label-sm">Upload your Results in ZIP</label>-->
							<!--<input type="file" class="custom-file-input form-control form-control-sm" id="customFile" required>-->
						<!--</div>-->
					<!--</div>-->
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="submit" class="btn btn-primary">Save</button>
				</div>
			</form>
		</div>
	</div>
</div>
